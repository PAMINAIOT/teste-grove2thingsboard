<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="PT`cHW)oB`3m#UJ@?qf.">serverAddress</variable><variable id="G$?nu1Qo/A6~@:uh#@HA">accessToken</variable></variables><block type="pxt-on-start" id="GpSAHlBt$JYv,fks0uM;" x="0" y="0"><statement name="HANDLER"><block type="grove_setupWifi" id="_hp$%0YUCiY:7}[[p$M!"><field name="txPin">SerialPin.C17</field><field name="rxPin">SerialPin.C16</field><field name="baudrate">BaudRate.BaudRate115200</field><value name="ssid"><shadow type="text" id="i3}|:c6q,_qnoah8b^~0"><field name="TEXT">komsomolsk</field></shadow></value><value name="passwd"><shadow type="text" id=";1iXl^g)mC@Y(+Q(W^E|"><field name="TEXT">vikaschnika</field></shadow></value><next><block type="controls_if" id="o@wqNbq^`ezl@(t(,]fZ"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="grove_wifiOK" id="%`4mVAK^0G21L?7B0Ec@"></block></value><statement name="DO0"><block type="basic_show_icon" id="}r%;*D?i0Trr|;wT=Zk^"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><field name="i">IconNames.Heart</field></block></statement><next><block type="variables_set" id="smgw7GbR$Nd$@a9t}`77"><field name="VAR" id="PT`cHW)oB`3m#UJ@?qf.">serverAddress</field><comment pinned="false" h="80" w="160">Konfiguration des ThingsBoard-Servers</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="8x1)yd^XM;vb29;g1t}y"><field name="TEXT">77.244.104.128:9090</field></block></value><next><block type="variables_set" id="sE=/A~xu(~WVTV^SLzT="><field name="VAR" id="G$?nu1Qo/A6~@:uh#@HA">accessToken</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="*[Ag67X#r!DS^-Ugy6,Q"><field name="TEXT">wV0EikPcEMHcE3u3zvgI</field></block></value><next><block type="typescript_statement" id="%z!!B@IJn)`^PQW9AmQZ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function sendDataToThingsboard(data: any) {" line1="    const payload = JSON.stringify(data);" line2="    const request = `POST /api/v1/${accessToken}/telemetry HTTP/1.1\r\nHost: ${serverAddress}\r\nContent-Type: application/json\r\nContent-Length: ${payload.length}\r\n\r\n${payload}`;" line3="" line4="    sendAtCmd(&quot;AT+CIPSEND&quot; + request);" line5="}" numlines="6"></mutation><next><block type="typescript_statement" id="~%SGF#]1DU=F2g%A=S+." editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const dataToSend = {" line1="    temperature: 60" line2="    //humidity: 50," line3="    //pressure: 1013" line4="};" numlines="5" declaredvars="dataToSend"></mutation><next><block type="function_call" id="?O;UQYdWRcuzh.jll/0?"><mutation name="sendAtCmd" functionid="_BzpfImkVw3eIxJ|n-gx"><arg name="cmd" id="mmhpzzof4359yty21k04" type="string"></arg></mutation><value name="mmhpzzof4359yty21k04"><shadow type="text" id="3Dp+!6EeSO_Q}wDEBh]O"><field name="TEXT">AT+CIPSTART="TCP","paminasogo.ddns.net",9090</field></shadow></value><next><block type="typescript_statement" id="0G0sNgD$9u5=GNsIkm@8" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="sendDataToThingsboard(dataToSend);" numlines="1"></mutation><next><block type="function_call" id="Vs;,P0a_q#S^Z?|9bUx("><mutation name="sendAtCmd" functionid="_BzpfImkVw3eIxJ|n-gx"><arg name="cmd" id="mmhpzzof4359yty21k04" type="string"></arg></mutation><value name="mmhpzzof4359yty21k04"><shadow type="text" id="7=)tjg0X(S@;N2hYL1Cq"><field name="TEXT">AT+CIPCLOSE</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="EY6:+ESeOG:(}+hPGeTz" x="1843" y="0"><mutation name="sendAtCmd" functionid="_BzpfImkVw3eIxJ|n-gx"><arg name="cmd" id="mmhpzzof4359yty21k04" type="string"></arg></mutation><field name="function_name">sendAtCmd</field><comment pinned="false" h="80" w="160">AT Command Send</comment><statement name="STACK"><block type="serial_writestring" id="w1elu?@AFb,O^M-idrV-"><value name="text"><block type="text_join" id="chg~0c(OfujJQwAES4/f"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="argument_reporter_string" id="3,K6o*}XI$K!pBmpBE+)"><field name="VALUE">cmd</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="#j~[4v93JC7n/QKS}Z]Y" editable="false"><field name="EXPRESSION">"\u000D\u000A"</field></block></value></block></value></block></statement></block></xml>